<h1>Загрузка данных для обучения</h1>

<form method="post">
    {% csrf_token %}

    <!-- Выбор торговой пары -->
    <label for="pair">Выберите торговую пару:</label>
    <select id="pair" name="pair">
        {% for pair in available_pairs %}
            <option value="{{ pair }}">{{ pair }}</option>
        {% endfor %}
    </select>

    <!-- Выбор таймфрейма -->
    <label for="timeframe">Выберите тайм-фрейм:</label>
    <select id="timeframe" name="timeframe">
        <option value="1m">1 минута</option>
        <option value="3m">3 минуты</option>
        <option value="5m">5 минут</option>
        <option value="15m">15 минут</option>
        <option value="30m">30 минут</option>
        <option value="1h">1 час</option>
        <option value="2h">2 часа</option>
        <option value="4h">4 часа</option>
        <option value="6h">6 часов</option>
        <option value="8h">8 часов</option>
        <option value="12h">12 часов</option>
        <option value="1d">1 день</option>
        <option value="3d">3 дня</option>
        <option value="1w">1 неделя</option>
        <option value="1M">1 месяц</option>
    </select>

    <!-- Выбор диапазона дат -->
    <label for="start_date">Начальная дата:</label>
    <input type="date" id="start_date" name="start_date" value="2020-01-01">

    <label for="end_date">Конечная дата:</label>
    <input type="date" id="end_date" name="end_date" value="{{ today }}">

    <!-- Кнопка загрузки данных -->
    <button type="submit">Загрузить данные</button>
</form>

<h2>Ваши загруженные данные</h2>

{% if user_data.exists %}
    <ul>
        {% for data in user_data %}
            <li>
                <strong>{{ data.asset_name }}</strong> ({{ data.timestamp|date:"d.m.Y" }})
                <!-- Форма для изменения названия таблицы -->
                <form method="post" action="{% url 'rename_table' data.id %}" style="display: inline;">
                    {% csrf_token %}
                    <input type="text" name="new_name" placeholder="Новое название">
                    <button type="submit">Изменить название</button>
                </form>
                <!-- Форма для удаления таблицы -->
                <form method="post" action="{% url 'delete_table' data.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit">Удалить</button>
                </form>
                <!-- Ссылка для просмотра таблицы -->
                <form method="get" action="{% url 'view_table' data.id %}" style="display: inline;">
                    <button type="submit">Посмотреть</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Нет загруженных данных</p>
{% endif %}

